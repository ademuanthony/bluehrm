@using Abp.Web.Mvc.Extensions
@using SoftBreeze.BlueHrm.Authorization
@using SoftBreeze.BlueHrm.PersonalInformation.Dto.Employees
@using SoftBreeze.BlueHrm.Web.Areas.Pim.Controllers
@using SoftBreeze.BlueHrm.Web.Navigation

@{
    ViewBag.CurrentPageName = PageNames.App.Pim.EmployeeList;
    var employeee = (EmployeeDto)ViewBag.Employee;
}

@section Styles
{
    @Html.IncludeStyle("~/Areas/Pim/Views/EmployeeList/EmployeeDetail/Supervisors/Index.min.css")
}
@section Scripts
{
    <script>
        app.currentEmployeeId = @employeee.Id;
    </script>
    @Html.IncludeScript("~/Areas/Pim/Views/EmployeeList/EmployeeDetail/Supervisors/_CreateOrEditModal.js")
    @Html.IncludeScript("~/Areas/Pim/Views/EmployeeList/EmployeeDetail/Supervisors/Supervisors.js")
}

<div class="row margin-bottom-5">
    <div class="col-xs-6">
        <div class="page-head">
            <div class="page-title">
                <h1>
                    <span>@L("Employees")</span> <small>@employeee.LastName @employeee.FirstName</small>
                </h1>
            </div>
        </div>
    </div>
    <div class="col-xs-6 text-right">
        @if (IsGranted(AppPermissions.Pages_Pim_Eployee_Create))
        {
            <button id="CreateNewSupervisorButton" class="btn btn-primary blue">
                <i class="fa fa-plus"></i>
                @L("AssignSupervisor")
            </button>
        @*<button id="CreateNewSubordinateButton" class="btn btn-primary blue">
            <i class="fa fa-plus"></i>
            @L("AddSubordinate")
        </button>*@
        }
    </div>
</div>

<div class="portlet light">
    <div class="portlet-body">
        <div id="SettingsTabPanel" class="tabbable-line">


            <ul class="nav nav-tabs nav-tabs-items-to-new-page">

                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.BasicSection})"
                       data-toggle="tab" aria-expanded="false">
                        @L("PersonalDetail")
                    </a>
                </li>
                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Contacts})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Contacts")
                    </a>
                </li>
                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.EmergencyContacts})"
                       data-toggle="tab" aria-expanded="false">
                        @L("EmergencyContacts")
                    </a>
                </li>
                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Dependants})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Dependants")
                    </a>
                </li>
                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Immigration})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Immigration")
                    </a>
                </li>
                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Job})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Job")
                    </a>
                </li>
                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Salary})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Salary")
                    </a>
                </li>
                <li class="active">
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Supervisors})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Supervisors")
                    </a>
                </li>
                <li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Qualifications})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Qualifications")
                    </a>
                </li>
                @*<li>
                    <a data-uri="@Url.Action("Detail", new {id = employeee.Number, section = EmployeeListController.Memberships})"
                       data-toggle="tab" aria-expanded="false">
                        @L("Memberships")
                    </a>
                </li>*@

            </ul>

            <div class="tab-content">

                <div class="tab-pane active" id="SettingsUserManagementTab">

                    <div class="portlet light">
                        <div class="portlet-body">
                            <div id="SupervisorsTable"></div>
                        </div>
                    </div>

                    @*<div class="portlet light">
                        <div class="portlet-body">
                            <div id="SubordinatesTable"></div>
                        </div>
                    </div>*@




                </div>


            </div>
        </div>
    </div>
</div>